/*
 *  PlotJs
 *  Abdessalem Boukil 2016
 *  The GNU General Public License v3.0
 *  http://abdesaslem.github.io/PlotJs/
 *
 */


!function(){function t(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}MATH_EXTENDED={},MATH_EXTENDED.sin=Math.sin,MATH_EXTENDED.cos=Math.cos,MATH_EXTENDED.tan=Math.tan,MATH_EXTENDED.asin=Math.asin,MATH_EXTENDED.acos=Math.acos,MATH_EXTENDED.atan=Math.atan,MATH_EXTENDED.abs=Math.abs,MATH_EXTENDED.floor=Math.floor,MATH_EXTENDED.ceil=Math.ceil,MATH_EXTENDED.exp=Math.exp,MATH_EXTENDED.sqrt=Math.sqrt,MATH_EXTENDED.max=Math.max,MATH_EXTENDED.min=Math.min,MATH_EXTENDED.sec=function(t){return 1/Math.cos(t)},MATH_EXTENDED.csc=function(t){return 1/Math.sin(t)},MATH_EXTENDED.cot=function(t){return 1/Math.tan(t)},MATH_EXTENDED.asec=function(t){return Math.acos(1/t)},MATH_EXTENDED.acsc=function(t){return Math.asin(1/t)},MATH_EXTENDED.acot=function(t){return Math.atan(1/t)},MATH_EXTENDED.ln=function(t){return Math.log(t)},MATH_EXTENDED.log=function(t){return Math.log(t)/Math.log(10)},MATH_EXTENDED.sinh=function(t){return(Math.exp(t)-Math.exp(-t))/2},MATH_EXTENDED.cosh=function(t){return(Math.exp(t)+Math.exp(-t))/2},MATH_EXTENDED.tanh=function(t){return(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))},MATH_EXTENDED.asinh=function(t){return Math.log(t+Math.sqrt(t*t+1))},MATH_EXTENDED.acosh=function(t){return Math.log(t+Math.sqrt(t*t-1))},MATH_EXTENDED.atanh=function(t){return.5*Math.log((1+t)/(1-t))},MATH_EXTENDED.sech=function(t){return 2/(Math.exp(t)+Math.exp(-t))},MATH_EXTENDED.csch=function(t){return 2/(Math.exp(t)-Math.exp(-t))},MATH_EXTENDED.coth=function(t){return(Math.exp(t)+Math.exp(-t))/(Math.exp(t)-Math.exp(-t))},MATH_EXTENDED.asech=function(t){return Math.log(1/t+Math.sqrt(1/t/t-1))},MATH_EXTENDED.acsch=function(t){return Math.log(1/t+Math.sqrt(1/t/t+1))},MATH_EXTENDED.acoth=function(t){return.5*Math.log((1+t)/(1-t))},Number.prototype.round=function(t){return+(Math.round(this+"e+"+t)+"e-"+t)},Plot=function(){function e(){if(1==A)return Plot.prototype.destroy(),!1;var t=document.createElement("div");t.style.height=window.innerHeight+"px",t.style.width=window.innerWidth+"px",t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.zIndex=9999999,document.body.appendChild(t),p.height=window.innerHeight,p.width=window.innerWidth,p.container=t;for(var e=new Plot(p,!0),n=0;n<k.length;n++)e.plot({equation:k[n].fn,borderThickness:k[n].settings.borderThickness,borderColor:k[n].settings.borderColor,resolution:k[n].settings.resolution})}function n(){c.clearRect(0,0,E.width,E.height),c.beginPath(),c.fillStyle=p.backgroundColor,c.fillRect(0,0,E.width,E.height),c.beginPath(),c.moveTo(g.x,0),c.lineTo(g.x,height),c.lineWidth=p.strokeThickness,c.strokeStyle=strokeColor,c.stroke(),c.beginPath(),c.moveTo(0,g.y),c.lineTo(width,g.y),c.lineWidth=p.strokeThickness,c.strokeStyle=strokeColor,c.stroke(),c.save(),c.translate(g.x,g.y),tickHeight=p.tickHeight,tickFontSize=p.fontSize;var t=l/20,e=s(t);t=Math.round(t*e)/e,d=t*u*p.keyNavSpeed;for(var n=-1*t;n>minX&&p.guidelines;n-=t){tickPos=n*u,n%thickLinePer==0?(c.beginPath(),c.moveTo(tickPos,-1*g.y),c.lineTo(tickPos,height-g.y),c.lineWidth=p.strokeThickness,c.strokeStyle=p.lineColor1,c.stroke()):(c.beginPath(),c.moveTo(tickPos,-1*g.y),c.lineTo(tickPos,height-g.y),c.lineWidth=1,c.strokeStyle=p.lineColor2,c.stroke()),c.beginPath(),c.moveTo(tickPos,tickHeight/2*-1),c.lineTo(tickPos,tickHeight/2),c.lineWidth=p.tickThickness,c.strokeStyle=p.tickColor,c.stroke();var i=Math.round(n*e)/e;c.font=tickFontSize+"px Lucida Sans Unicode",c.fillStyle=p.fontColor,c.fillText(i,tickPos-tickFontSize/2,-10)}for(var n=t;n<l+minX&&p.guidelines;n+=t){tickPos=n*u,n%thickLinePer==0?(c.beginPath(),c.moveTo(tickPos,-1*g.y),c.lineTo(tickPos,height-g.y),c.lineWidth=p.strokeThickness,c.strokeStyle=p.lineColor1,c.stroke()):(c.beginPath(),c.moveTo(tickPos,-1*g.y),c.lineTo(tickPos,height-g.y),c.lineWidth=1,c.strokeStyle=p.lineColor2,c.stroke()),c.beginPath(),c.moveTo(tickPos,tickHeight/2*-1),c.lineTo(tickPos,tickHeight/2),c.lineWidth=p.tickThickness,c.strokeStyle=p.tickColor,c.stroke();var i=Math.round(n*e)/e;c.font=tickFontSize+"px Lucida Sans Unicode",c.fillStyle=p.fontColor,c.fillText(i,tickPos-tickFontSize/2,-10)}for(var n=-1*t;n>minY&&p.guidelines;n-=t){tickPos=n*u,n%thickLinePer==0?(c.beginPath(),c.moveTo(-1*g.x,tickPos),c.lineTo(width-g.x,tickPos),c.lineWidth=p.strokeThickness,c.strokeStyle=p.lineColor1,c.stroke()):(c.beginPath(),c.moveTo(-1*g.x,tickPos),c.lineTo(width-g.x,tickPos),c.lineWidth=1,c.strokeStyle=p.lineColor2,c.stroke()),c.beginPath(),c.moveTo(tickHeight/2*-1,tickPos),c.lineTo(tickHeight/2,tickPos),c.lineWidth=p.tickThickness,c.strokeStyle=p.tickColor,c.stroke();var i=Math.round(n*e)/e;c.font=tickFontSize+"px Lucida Sans Unicode",c.fillStyle=p.fontColor,c.fillText(-1*i,-30,tickPos-tickFontSize/2)}for(var n=t;n<h+minY&&p.guidelines;n+=t){tickPos=n*u,n%thickLinePer==0?(c.beginPath(),c.moveTo(-1*g.x,tickPos),c.lineTo(width-g.x,tickPos),c.lineWidth=p.strokeThickness,c.strokeStyle=p.lineColor1,c.stroke()):(c.beginPath(),c.moveTo(-1*g.x,tickPos),c.lineTo(width-g.x,tickPos),c.lineWidth=1,c.strokeStyle=p.lineColor2,c.stroke()),c.beginPath(),c.moveTo(tickHeight/2*-1,tickPos),c.lineTo(tickHeight/2,tickPos),c.lineWidth=p.tickThickness,c.strokeStyle=p.tickColor,c.stroke();var i=Math.round(n*e)/e;c.font=tickFontSize+"px Lucida Sans Unicode",c.fillStyle=p.fontColor,c.fillText(-1*i,-30,tickPos-tickFontSize/2)}c.restore()}function i(){var t=Array.prototype.slice.call(arguments);if(m.style.transform="",m.style.left="0px",m.style.top="0px",M.clearRect(0,0,E.width,E.height),"object"==typeof t[0]&&"transform"==t[1]){var e=t[0];if(0==e.x&&0==e.y)return;xUnits=e.x/u*-1,yUnits=e.y/u*-1,minX+=xUnits,maxX+=xUnits,minY+=yUnits,maxY+=yUnits,o(),n();for(var i=0;i<k.length;i++)a(k[i].fn,k[i].settings);p.dispCallback(e)}else if("object"==typeof t[0]&&"zoom"==t[1]&&"string"==typeof t[2]){var r=t[2],s=0;"in"==r?s=-1:"out"==r&&(s=1),minX=Math.abs(S+s)*minX,maxX=Math.abs(S+s)*maxX,minY=Math.abs(S+s)*minY,maxY=Math.abs(S+s)*maxY,l=maxX-minX,h=maxY-minY,o(),n();for(var i=0;i<k.length;i++)a(k[i].fn,k[i].settings);p.zommCallback()}}function o(){g.y=minY/h*height*-1,g.x=minX/l*width*-1,u=width/l,f=l/2e3}function r(t){var e={x:(t.x-contCords.x)/u+minX,y:(t.y-contCords.y)/u+minY};return e}function s(t){for(var e=0;;e++){if(t>1)return Math.pow(10,e);t*=10}}function a(t,e){c.save(),c.translate(g.x,g.y),c.beginPath();for(var n=!0,i=0,o=minX;o<(width-g.x)/u;o+=e.resolution){var r=o*u,s=t(o)*u*-1;h>s-1500&&s+1500>-1500&&(t(o)-i<h/2?n?(n=!1,c.moveTo(r,s)):c.lineTo(r,s):n=!0,i=t(o))}c.lineWidth=e.borderThickness,c.strokeStyle=e.borderColor,c.stroke(),c.restore()}var l,c,h,u,f,d,p=[],g={},k=[],T={container:"",max:21,min:-21,strokeThickness:3,strokeColor:"black",lineColor1:"#AAAAAA",lineColor2:"#DDDDDD",backgroundColor:"white",zoom:!0,navigation:!0,height:"400px",width:"400px",errorReporting:!0,foregroundColor:"#EEEEEE",guidelines:!0,tickThickness:2,tickColor:"black",tickHeight:16,keyNavSpeed:1,fontSize:10,fontColor:"black",dispCallback:function(){return!0},zommCallback:function(){return!0}};if(arguments[0]&&"object"==typeof arguments[0]&&(p=t(T,arguments[0]),("undefined"==typeof p.container||null===p.container||-1==p.container.constructor.toString().indexOf("Div"))&&p.errorReporting))throw new Error("The container is not valid, the container should be an empty div");var y=p.container;y.style.height=parseInt(p.height,10)+"px",y.style.width=parseInt(p.width,10)+"px","absolute"!=window.getComputedStyle(y).position&&"fixed"!=window.getComputedStyle(y).position&&(y.style.position="relative");var m=document.createElement("div");m.style.position="relative",m.style.height="100%",m.style.width="100%",y.appendChild(m);var E=document.createElement("canvas");E.setAttribute("height",parseInt(p.height,10)+"px"),E.setAttribute("width",parseInt(p.width,10)+"px"),m.appendChild(E);var v=document.createElement("canvas");v.setAttribute("height",E.height),v.setAttribute("width",E.width),v.style.position="absolute",v.style.top="0px",v.style.left="0px",m.appendChild(v);var x=document.createElement("div");x.style.position="absolute",x.style.bottom="2%",x.style.left="2%",x.style.zIndex=444,x.style.cursor="pointer",x.style.opacity="0.4";var A=arguments[1];1==A?(x.title="Go Back",x.innerHTML='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABCUlEQVRYhe2XUQrCMBAFR7xj623aI0jFIxTEekQhfpiUGDebhKYq2Af7k6XMlA1lC8/sgCNwQE+X6AP0iX4DDJY5w0+AAe5Aq8BNhoBRJBrLMMDZSRztgStJovP6OQKShA93NcQavkQX9HIFfIk2wphHHpOYgrNSAQPcEi84R5KQqlQgLO2eZUksEVDhLtcVBabUw+GFW2ME/RJ4DQFRIhdeS+BFogReU0Adx5YtW/4rP/Eh+uqnuFSihsAbvERiqUAU7vLVhUTaXmsKqCtZDrzGCESJ2N7+kbU8Bv/Ej0kLMGp2gkSuQB+cSxIjwB64KPBQIkcghEsSF8vGSYwK3JdIJQb3JUYHfwAnXYXTAAFAnAAAAABJRU5ErkJggg=="/>'):(x.title="Go Fullscreen",x.innerHTML='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACI0lEQVRYhbXXTYhOURzH8c8Ys5iiWQ0SC2KhsbCw8pYFGxElO0lYWCgbG2pqKGEzJQsvWShZKDZko2GhSWlKiZkGKVaTspokNDOPxb1Ht6fnueeeO8/zr1vPOf3u+X5P95x7zwMvMY1XeIjruIDj2IctWIUe6bUU67EXp3EZ93PWVzyH92hErllsTACvwyf8jYw7Ac8qwLcnzhyGK0zsKdwsCcxjRw14VYm7ZM+7LHRbvecPZ7BQMvYlOBoRaOBODYkYvJFnbKsgkCpRBd7AYVjR1Dm3SIkYvLgz/i/u2bzjPI5EJMrWRJVnvgs/8/aGcOPbHB6qjkQMfrGQ3ZlL9IeOwRaziUncKkikwEOtbdGXJPEBfXluMhGeVK0kpmTfh1Cr8bEb8FYSzfCixHQ34EWJiTbwosQURjoNT6m6r+1KA/d2a/BY9eKe7CCxvCQ3gBc41Q14WFzjbSQG8DrPLHRKohneTqIID9eiJdrBw/WkkB1vk6kk0Yc1ifA/OFjIXynJtpNYGX5sxgw21YSHupogcQLfQmNPHprJZWLwQy3gVSVO5vD5vN0Px5oAdeFVJeYL7SE4V3JDKjzUtQpjNnAARjsMT5E4Cw8i8FYLrlMSozBWEpiTrZG6NYRfJeM/Ivt8llnWlRjC98jYb+BHJPQb77AsAT5YAR62vs+yf7JjsnfAiGyv7pYdHJckzTurHtnhZCv2y/b/MG7gsezV/QWT/wBzNcUpz04e1gAAAABJRU5ErkJggg=="/>'),y.appendChild(x);var M=v.getContext("2d"),b=document.createElement("div");b.style.height=parseInt(p.height,10)/25+"px",b.style.width=parseInt(p.width,10)/5+"px",b.style.position="absolute",b.style.bottom="0px",b.style.right="0px",b.style.border="1px solid black",b.style.backgroundColor="white",y.appendChild(b);var w=Math.random(0,999);b.innerHTML='<span id="plotjs-valuesX'+w+'" style="line-height:'+parseInt(p.height,10)/25+'px;position:absolute;left:0;width:50%;height:100%;text-align:center;font-size:12px;">X:&nbsp;&nbsp;</span><span id="plotjs-valuesY'+w+'" style="line-height:'+parseInt(p.height,10)/25+'px;position:absolute;right:0;width:50%;height:100%; text-align:center;font-size:12px;">Y:&nbsp;&nbsp;</span>';var D=document.getElementById("plotjs-valuesX"+w),P=document.getElementById("plotjs-valuesY"+w);p.border&&(y.style.border="2px solid black"),y.style.overflow="hidden",y.style.backgroundColor=p.foregroundColor,contCords=y.getBoundingClientRect(),c=E.getContext("2d"),width=E.width,height=E.height,maxX=p.max,minX=p.min,l=maxX-minX,maxY=height/2/(width/l),minY=height/2/(width/l)*-1,h=maxY-minY,strokeColor=p.strokeColor,lineUnit=p.lineUnit,tickHeight=15,o(),thickLinePer=8;var C={},X=!1,H=1,S=.2;n(),p.navigation&&(m.style.cursor="grab"),m.addEventListener("mousedown",function(t){1==t.which&&p.navigation&&(m.style.cursor="grabbing",C.x=t.screenX,C.y=t.screenY,X=!0)}),m.addEventListener("mouseup",function(t){if(X){m.style.cursor="grab";var e={};e.x=t.screenX-C.x,e.y=t.screenY-C.y,X=!1,i(e,"transform")}}),m.addEventListener("mousemove",function(t){if(X){var e={};e.x=t.screenX-C.x,e.y=t.screenY-C.y,t.ctrlKey||(m.style.top=e.y+"px"),t.shiftKey||(m.style.left=e.x+"px")}else{var n=r({x:t.clientX,y:t.clientY});M.clearRect(0,0,E.width,E.height),M.save(),M.translate(g.x,g.y);for(var i=0;i<k.length;i++)fx=k[i].fn(n.x),M.beginPath(),M.fillStyle=k[Math.abs(k.length-i)-1].settings.borderColor,M.arc(n.x*u,fx*u*-1,5,0,2*Math.PI),M.fill(),D.innerHTML="X: "+n.x.toFixed(2),P.innerHTML="Y: "+fx.toFixed(2);M.restore()}}),m.addEventListener("wheel",function(t){return p.zoom?(deltaY=t.deltaY,t.preventDefault(),scrollTime=400,void(Math.abs(deltaY)==deltaY?(H=parseFloat(H)-S,m.style.OTransition="-o-transform "+scrollTime/1e3+"s ease",m.style.webkitTransition="-webkit-transform "+scrollTime/1e3+"s ease",m.style.MozTransition="-moz-transform "+scrollTime/1e3+"s ease",m.style.msTransition="-webkit-transform "+scrollTime/1e3+"s ease",m.style.transition="transform "+scrollTime/1e3+"s ease",m.style.webkitTransform="scale("+(1-S)+")",m.style.msTransform="scale("+(1-S)+")",m.style.MozTransform="scale("+(1-S)+")",m.style.OTransform="scale("+(1-S)+")",m.style.transform="scale("+(1-S)+")",m.style.transform="scale("+(1-S)+")",setTimeout(function(){m.style.OTransition="",m.style.webkitTransition="",m.style.MozTransition="",m.style.msTransition="",m.style.transition="";var e={x:t.screenX,y:t.screenY};i(e,"zoom","out")},scrollTime)):(H=parseFloat(H)+S,m.style.OTransition="-o-transform "+scrollTime/1e3+"s ease",m.style.webkitTransition="-webkit-transform "+scrollTime/1e3+"s ease",m.style.MozTransition="-moz-transform "+scrollTime/1e3+"s ease",m.style.msTransition="-webkit-transform "+scrollTime/1e3+"s ease",m.style.transition="transform "+scrollTime/1e3+"s ease",m.style.transform="scale("+(1+S)+")",m.style.webkitTransform="scale("+(1+S)+")",m.style.msTransform="scale("+(1+S)+")",m.style.MozTransform="scale("+(1+S)+")",m.style.OTransform="scale("+(1+S)+")",m.style.transform="scale("+(1+S)+")",setTimeout(function(){m.style.OTransition="",m.style.webkitTransition="",m.style.MozTransition="",m.style.msTransition="",m.style.transition="";var e={x:t.screenX,y:t.screenY};i(e,"zoom","in")},scrollTime)))):!1}),m.addEventListener("mouseenter",function(){this.setAttribute("class","plotjs-hovered")}),m.addEventListener("mouseleave",function(){this.setAttribute("class","")}),document.body.addEventListener("keydown",function(t){if("plotjs-hovered"!=m.getAttribute("class"))return!1;if(!p.navigation)return!1;var n,o=t.which;if(38==o||39==o||37==o||40==o||122==o||27==o)switch(o){case 38:t.preventDefault(),n={x:0,y:d},i(n,"transform");break;case 39:t.preventDefault(),n={x:-1*d,y:0},i(n,"transform");break;case 37:t.preventDefault(),n={x:d,y:0},i(n,"transform");break;case 40:t.preventDefault(),n={x:0,y:-1*d},i(n,"transform");break;case 122:t.preventDefault(),e();break;case 27:1==A&&e()}}),x.addEventListener("click",function(){e()}),m.addEventListener("dblclick",function(){e()}),Plot.prototype.plot=function(e){var n=Math.round(Date.now()*Math.random(0,1e4)),i={borderColor:"green",borderThickness:3,equation:"function"==typeof e.equation?function(){}:"",resolution:f};if("function"==typeof e)k.push({id:n,fn:e,settings:i}),a(e,i);else if("string"==typeof e){var o=new Equation(e);o=o.getFunction(),k.push({id:n,fn:o,settings:i}),a(o,i)}else{if("object"!=typeof e||"undefined"==typeof e.equation)throw new Error("Bad parameters to Plot method");var r=t(i,e);if("function"==typeof r.equation)k.push({id:n,fn:r.equation,settings:r}),a(r.equation,r);else{if("string"!=typeof r.equation)throw new Error("Bad parameters to Plot method");var o=new Equation(r.equation);o=o.getFunction(),k.push({id:n,fn:o,settings:i}),a(o,i)}}return{id:n}},Plot.prototype.destroyFunction=function(t){if("undefined"==typeof t||"undefined"==typeof t.id)throw new Error("Bad parameters to destoryFunction");for(var e=0;e<k.length;e++)if(k[e].id==t.id){k.splice(e,1),n();for(var i=0;i<k.length;i++)a(k[i].fn,k[i].settings);return!0}return!1},Plot.prototype.clear=function(){return k=[],n(),!0},Plot.prototype.destroy=function(){return y.remove(),!0}},Equation=function(t){if(!t)throw"You Have To Write An Equation";var e=function(t){for(var i=0;i<t.length;i++)n(t[i])&&e(t[i]);for(var i=0;i<t.length;i++)void 0!=MATH_EXTENDED[t[i]]&&(t[i]="MATH_EXTENDED."+t[i].toLowerCase(),t.splice(i,2,new Array("(",t[i],t[i+1],")")),i--);return t},n=function(t){return null==t?0:-1==t.constructor.toString().indexOf("Array")?!1:!0},o=function(t){for(var e="",i=0;i<t.length;i++)e+=n(t[i])?o(t[i]):t[i];return e},r=function(t,e){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},s=function(t){for(e=0;e<t.length;e++)n(t[e])&&s(t[e]);for(var e=0;e<t.length;e++)"^"==t[e]&&(t.splice(e-1,3,new Array("Math.pow",new Array("(",t[e-1],",",t[e+1],")"))),e-=2);return t},a=function(t){for(var e=-1;r(t,"(")||r(t,")");){for(e=-1,i=0;i<t.length;i++){if("("==t[i]&&(e=i),")"==t[i]&&-1==e)throw"Unmatched right parenthesis )";")"==t[i]&&-1!=e&&(t.splice(e,i-e+1,t.slice(e,i+1)),i=-1,e=-1)}if(-1!=e)throw"Unmatched left parenthesis ("}return t},l=function(t){var n,i;return i=t.replace(/ /g,""),i=i.replace(/([0-9])([x])/gi,"$1*$2"),i=i.replace(/(\))([x]|\()/gi,"$1*$2"),i=i.replace(/([0-9x])(\()/gi,"$1*$2"),i=i.replace(/([a-z0-9\.])([^a-z0-9\.])/gi,"$1 $2"),i=i.replace(/([^a-z0-9\.])([a-z0-9\.])/gi,"$1 $2"),i=i.replace(/(\-|\)|\()/g," $1 "),n=a(i.split(/ +/)),n=e(n),null==n?!1:(n=s(n),null==n?null:o(n))};return Equation.prototype.getFunction=function(){return this.eqFunction=new Function("x","return "+this.equation),this.eqFunction},this.oldEquation=t,this.equation=l(t),this}}();